CREATE DATABASE codefightersdb;

CREATE TABLE USERS
(
	UserID int not null AUTO_INCREMENT,
  	Username varchar(255) not null,
    	Password varchar(255) not null,
 	FirstName varchar(255) not null,
  	LastName varchar(255) not null,
  	Email varchar(255) not null,
  	UNIQUE (username),
   	PRIMARY KEY (userID)
);
ALTER TABLE USERS AUTO_INCREMENT=100;

CREATE TABLE PROBLEMS 
(
	ProblemID int not null,
	ProblemName	varchar(50),
	Volume int not null,
    	TimeLimit int not null,
    	MemoryLimit int not null,
  	Description varchar(5000),
  	TestCase varchar(800),
    	TestCaseOutput varchar(800),
    	UNIQUE (ProblemID),
    	PRIMARY KEY (ProblemID)
);

CREATE TABLE SUBMISSIONS 
(
    	SubmissionID int not null AUTO_INCREMENT,
    	ProblemID int not null,
   	UserID int not null,
   	Verdict varchar(255),
    	Language varchar(255),
  	PRIMARY KEY (SubmissionID),
 	FOREIGN KEY (ProblemID) REFERENCES PROBLEMS(ProblemID),
  	FOREIGN KEY (UserID) REFERENCES USERS(UserID) 
);


CREATE TABLE PROBLEM_CATEGORY
(
    Problem_CategoryID int not null AUTO_INCREMENT,
    ProblemID int not null,
    Tag varchar(50),
    FOREIGN KEY (ProblemID) REFERENCES PROBLEMS(ProblemID),
    PRIMARY KEY (Problem_CategoryID)
);
